<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.korit.museum.repository.PaintingRepository">


    <select id="findPaintingByPaintingCode" resultType="com.korit.museum.entity.PaintingMst">
        select
            painting_id as paintingId,
            painting_code as paintingCode,
            painting_name as paintingName,
            exhibition_period as exhibitionPeriod,
            author,
            painting_mstcol as paintingMstCol,
        from
            painting_mst
        where
            painting_code = #{paintingCode};
    </select>

    <insert id="registerPaintingImages" parameterType="list">
        insert into painting_image
        values
        <foreach collection="list" item="file" separator=",">
            (0, #{file.paintingCode}, #{file.saveName}, #{file.originName})
        </foreach>
    </insert>

    <select id="findPaintingImageAll" resultType="com.korit.museum.entity.PaintingImage">
        select
            image_id as imageId,
            book_code as paintingCode,
            save_name as saveName,
            origin_name as originName
        from
            painting_image
        where
            painting_code = #{paintingCode}
    </select>

    <select id="findPaintingByImageId" resultType="com.korit.museum.entity.PaintingImage">
        select
            image_id as imageId,
            book_code as paintingCode,
            save_name as saveName,
            origin_name as originName
        from
            painting_image
        where
            image_id = #{imageId}
    </select>

    <select id="findPaintingByImageCode" resultType="com.korit.museum.entity.PaintingImage">
        select
            image_id as imageId,
            book_code as paintingCode,
            save_name as saveName,
            origin_name as originName
        from
            painting_image
        where
            painting_code = #{paintingCode}
    </select>

    <insert id="savePainting" parameterType="com.korit.museum.web.dto.PaintingReqDto">
        insert into painting_mst
        values
            (0, #{paintingCode}, #{paintingId}, #{paintingTitelname}, #{viewingTime},  #{exhibitionWorks}, #{exhibitionWorks}, #{exhibitionPeriod}, #{info_paintingName},
            #{info_author}, #{info_paintingSize}, #{info_paintingMstcol}, #{info_material})
    </insert>


</mapper>